<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css" type="text/css"></link>
    <script type="text/javascript" src="lib/webgl-utils.js"></script>
  </head>
  <body>
    <canvas id="canvas" width="640" height="480"></canvas>
  </body>
  <script id="vs" type="x-shader/x-vertex">
    precision mediump float;
    attribute vec2 position;
    varying vec2 vPos;

    void main() {
      gl_Position = vec4(position, 0, 1);
      vPos = (position + 1.0) / 2.0;
    }
  </script>

  <script id="fs" type="x-shader/x-fragment">
    precision mediump float;
    varying vec2 vPos;

    void main() {
      gl_FragColor = vec4(vPos, 0.5, 1);  // green
    }
  </script>
  <script type="text/javascript">
    var canvas = document.getElementById("canvas"),
        gl = canvas.getContext("experimental-webgl"),
        program = createProgramFromScripts(gl, ["vs", "fs"]),
        locations = {position: 0},
        buffer = gl.createBuffer(),
        positions = [],
        x, y,
        rows = 10,
        columns = 15,
        steps = {x: 2.0 / columns, y: 2.0 / rows};

    gl.useProgram(program);
    locations.position = gl.getAttribLocation(program, "position");

    // Create a series of triangles
    for (x = 0; x < columns; x += 1) {
      for (y = 0; y < rows; y += 1) {
        var px = ((x / columns) * 2.0) - 1.0,
            py = ((y / rows) * 2.0) - 1.0;

        positions.push(px, py);
        positions.push(px + steps.x, py);
        positions.push(px + steps.x / 2, py + steps.y);
      }
    }

    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);
    gl.enableVertexAttribArray(locations.position);
    gl.vertexAttribPointer(locations.position, 2, gl.FLOAT, false, 0, 0);

    gl.drawArrays(gl.TRIANGLES, 0, positions.length / 2);
  </script>
</html>